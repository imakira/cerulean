{"version":3,"sources":["app/main.cljc"],"mappings":"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","names":["app.main/SERVER_PATH","app.main/fetch-asset","path","chan","cljs.core.async.chan","c__39522__auto__","cljs.core.async.impl.dispatch/run","f__39523__auto__","switch__39401__auto__","state_53206","state_val_53207","inst_53197","inst_53198","inst_53199","inst_53200","inst_53201","inst_53202","statearr-53231","cljs.core.async.impl.ioc-helpers/take!","inst_53204","cljs.core.async.impl.ioc-helpers/return-chan","statearr-53232","state-machine__39402__auto__","ret-value__39403__auto__","result__39404__auto__","cljs.core/keyword-identical?","ex__39405__auto__","e53233","statearr-53234","cljs.core/seq","statearr-53235","cljs.core/first","state__39524__auto__","statearr-53236","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","js/module$node_modules$axios$dist$browser$axios_cjs.get","resp","state_53213","state_val_53214","inst_53208","inst_53209","cljs.core.async.impl.ioc-helpers/put!","inst_53211","statearr-53215","e53216","statearr-53217","statearr-53218","statearr-53219","cljs.core.js__GT_clj","error","state_53224","state_val_53225","inst_53220","inst_53222","statearr-53226","e53227","statearr-53228","statearr-53229","statearr-53230","app.main/use-asset","vec__53237","cljs.core.nth","asset","set-asset!","uix.core/use-state","uix.hooks.alpha.use_effect","uix.core/jsfy-deps","state_53257","state_val_53258","inst_53252","inst_53254","inst_53255","statearr-53259","e53260","statearr-53261","statearr-53262","statearr-53263"],"sourcesContent":["(ns app.main\n  (:require [uix.core :refer [defui $ use-state use-effect]]\n            [uix.dom.server :as dom.server]\n            [clojure.core.async :as a]\n            [malli.core :as m]\n            [malli.generator :as mg]\n            #?@(:cljs [[\"axios\" :as axios]])\n            #?@(:clj [[app.assets :as assets]\n                      [reitit.core :as r]])))\n\n(def SERVER_PATH \"http://localhost:3001/\")\n\n(defn fetch-asset [path]\n  (let [chan (a/chan 1)]\n    (a/go #?(:clj (->>\n                   (let [routing (r/match-by-path\n                                  (r/router assets/assets-route)\n                                  (str \"/assets/\" path))]\n                     (:body ((-> routing\n                                 :data\n                                 :handler)\n                             routing)))\n                   (a/>! chan))\n             :cljs (-> (axios/get (str SERVER_PATH \"assets/\" path))\n                       (.then (fn [resp]\n                                (a/go (a/>! chan (:data (js->clj resp :keywordize-keys true))))))\n                       (.catch (fn [error]\n                                 (a/go (a/>! chan (js->clj error :keywordize-keys)))))))\n          (a/<! chan))))\n\n(defn use-asset [path]\n  #?(:cljs\n     (let [[asset set-asset!] (use-state nil [])]\n       (use-effect (fn [] (a/go (set-asset! (a/<! (fetch-asset path)))))\n                   [])\n       asset)\n     :clj\n     (a/<!! (fetch-asset path))))\n\n#_#?(:cljs (a/go (tap> (a/<! (a/<! (fetch-asset \"blog/demo\"))))))\n"]}